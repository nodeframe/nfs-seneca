{"version":3,"sources":["../src/index.js"],"names":["senecaOptions","transportConfig","si","Module","parseOption","act","Wrapper","actGenerator","add","addGenerator","type","console","log","Mesh","init","registerHealthCheck"],"mappings":";;;;;;kBAMe,UAAUA,aAAV,EAA+C;AAAA,MAAtBC,eAAsB,uEAAJ,EAAI;;AAC5D,MAAMC,KAAK,sBAAOC,OAAOC,WAAP,CAAmBJ,aAAnB,CAAP,CAAX;;AAEA,MAAMK,MAAMC,QAAQC,YAAR,CAAqBL,EAArB,CAAZ;;AAEA,MAAMM,MAAMF,QAAQG,YAAR,CAAqBP,EAArB,CAAZ;;AAEA,UAAQD,gBAAgBS,IAAxB;AACE,SAAK,MAAL;AACEC,cAAQC,GAAR,CAAY,uBAAZ;AACAC,WAAKC,IAAL,CAAUZ,EAAV,EAAcD,eAAd;AACA;AACF;AACEU,cAAQC,GAAR,CAAY,wBAAZ;AACA,8BAASV,EAAT,EAAaD,eAAb;AACA;AARJ;;AAWAE,SAAOY,mBAAP,CAA2B,EAACb,MAAD,EAAKG,QAAL,EAAUG,QAAV,EAA3B,EAA2CP,eAA3C;;AAEA,SAAO,EAACI,QAAD,EAAMG,QAAN,EAAWN,MAAX,EAAP;AACD,C;;AA3BD;;;;AACA;;AACA;;IAAYW,I;;AACZ;;IAAYV,M;;AACZ;;IAAYG,O;;;;;;AAuBX","file":"index.js","sourcesContent":["import seneca from 'seneca';\nimport {register} from './register';\nimport * as Mesh from './plugin/mesh';\nimport * as Module from \"./module\";\nimport * as Wrapper from './seneca-wrapper';\n\nexport default function (senecaOptions, transportConfig = {}) {\n  const si = seneca(Module.parseOption(senecaOptions));\n\n  const act = Wrapper.actGenerator(si)\n\n  const add = Wrapper.addGenerator(si)\n\n  switch (transportConfig.type) {\n    case 'mesh':\n      console.log(\"nfs-seneca mesh mode!\")\n      Mesh.init(si, transportConfig)\n      break\n    default:\n      console.log(\"nfs-seneca normal mode\")\n      register(si, transportConfig)\n      break\n  }\n\n  Module.registerHealthCheck({si, act, add}, transportConfig)\n\n  return {act, add, si};\n};"]}